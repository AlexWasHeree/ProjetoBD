
CREATE
  TABLE FORNECEDORES
  (
    CNPJ VARCHAR2 (20) NOT NULL ,
    NOME VARCHAR2 (50) NOT NULL ,
    EMAIL VARCHAR2 (30) NOT NULL ,
    ENDERECO VARCHAR2 (30) NOT NULL 
  ) ;
ALTER TABLE FORNECEDORES ADD CONSTRAINT FORNECEDORES_PK PRIMARY KEY (
CNPJ ) ;

CREATE 
   TABLE TELEFONES
   (
      TELEFONES VARCHAR2 (20) NOT NULL ,
      CNPJ VARCHAR2 (20) NOT NULL
   ) ;
ALTER TABLE TELEFONES ADD CONSTRAINT TELEFONES_FK FOREIGN KEY (
CNPJ ) REFERENCES FORNECEDORES ( CNPJ ) ;
ALTER TABLE TELEFONES ADD CONSTRAINT TELEFONES_PK PRIMARY KEY ( TELEFONES, CNPJ ) ;

CREATE 
   TABLE PROPOSTA
   (
      ID NUMBER (20,0) NOT NULL ,
      VENCEDORA VARCHAR2 (20) NOT NULL ,
      PRECO_OFERTADO FLOAT (126) NOT NULL ,
      CNPJ VARCHAR2 (20) NOT NULL
   ) ;
ALTER TABLE PROPOSTA ADD CONSTRAINT PROPOSTA_FK FOREIGN KEY (
CNPJ ) REFERENCES FORNECEDORES ( CNPJ ) ;
ALTER TABLE TELEFONES ADD CONSTRAINT PROPOSTA_PK PRIMARY KEY ( ID ) ;

CREATE SEQUENCE SEQ_PROPOSTA START WITH 1 NOCACHE ORDER ;
CREATE OR REPLACE TRIGGER TRG_PROPOSTA BEFORE
  INSERT
    ON PROPOSTA FOR EACH ROW WHEN
    (
      NEW.ID IS NULL
    )
    BEGIN :NEW.ID := SEQ_PROPOSTA.NEXTVAL;
END;

ALTER TRIGGER TRG_PROPOSTA;

CREATE 
   TABLE PRODUTO
   (
      CODIGO_DE_BARRAS VARCHAR2 (20) NOT NULL ,
      UNIDADE_MEDIDA VARCHAR2 (20) NOT NULL ,
      QUANTIDADE NUMBER (100) NOT NULL ,
      VALOR_UNITARIO_MAXIMO FLOAT (126) NOT NULL
   ) ;
ALTER TABLE TELEFONES ADD CONSTRAINT PRODUTO_PK PRIMARY KEY ( CODIGO_DE_BARRAS ) ;

CREATE 
   TABLE PROPOSTACONTEMPRODUTO
   (
     ID NUMBER (20,0) NOT NULL ,
     CODIGO_DE_BARRAS VARCHAR2 (20) NOT NULL
   ) ;
ALTER TABLE TELEFONES ADD CONSTRAINT PROPOSTACONTEMPRODUTO_PK PRIMARY KEY ( ID, CODIGO_DE_BARRAS ) ;

DROP TABLE FORNECEDORES CASCADE CONSTRAINTS;

DROP TABLE TELEFONE CASCADE CONSTRAINTS;

DROP TABLE PROPOSTA CASCADE CONSTRAINTS;

DROP TABLE PRODUTO CASCADE CONSTRAINTS;

DROP TABLE PROPOSTACONTEMPRODUTO CASCADE CONSTRAINTS;